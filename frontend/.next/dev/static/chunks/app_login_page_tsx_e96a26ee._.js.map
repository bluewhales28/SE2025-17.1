{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/prj_cnpm/SE2025-17.1/frontend/app/login/page.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState } from \"react\"\r\nimport Image from \"next/image\"\r\nimport Link from \"next/link\"\r\nimport { Eye, EyeOff, Loader2 } from \"lucide-react\"\r\nimport { useRouter } from \"next/navigation\"\r\n\r\n// Giả lập các component UI của Shadcn để code có thể chạy ngay\r\n// Nếu bạn đã cài shadcn, hãy import từ @/components/ui/...\r\nconst Input = ({ className, ...props }: any) => (\r\n    <input\r\n        className={`flex h-12 w-full rounded-md border border-input bg-[#E0E7FF]/30 px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[#6B59CE] focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 ${className}`}\r\n        {...props}\r\n    />\r\n)\r\n\r\nconst Button = ({ className, children, disabled, ...props }: any) => (\r\n    <button\r\n        className={`inline-flex h-12 items-center justify-center rounded-md bg-[#6B59CE] px-8 text-sm font-medium text-white ring-offset-background transition-colors hover:bg-[#5a4cb4] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 w-full ${className}`}\r\n        disabled={disabled}\r\n        {...props}\r\n    >\r\n        {children}\r\n    </button>\r\n)\r\n\r\nconst Label = ({ className, children, ...props }: any) => (\r\n    <label\r\n        className={`text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 text-[#6B59CE] ${className}`}\r\n        {...props}\r\n    >\r\n        {children}\r\n    </label>\r\n)\r\n\r\nexport default function LoginPage() {\r\n    const router = useRouter()\r\n    const [showPassword, setShowPassword] = useState(false)\r\n    const [isLoading, setIsLoading] = useState(false)\r\n    const [error, setError] = useState(\"\")\r\n\r\n    const [formData, setFormData] = useState({\r\n        email: \"\",\r\n        password: \"\"\r\n    })\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault()\r\n        setIsLoading(true)\r\n        setError(\"\")\r\n\r\n        try {\r\n            // Kết nối với Backend Auth Service đang chạy ở port 8082\r\n            const response = await fetch(\"http://localhost:8082/auth/login\", {\r\n                method: \"POST\",\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                },\r\n                body: JSON.stringify({\r\n                    email: formData.email,\r\n                    // Backend đang yêu cầu trường là passwordHash, nhưng thông thường frontend gửi password\r\n                    // Dựa vào AuthRequest.java: private String passwordHash;\r\n                    passwordHash: formData.password\r\n                }),\r\n            })\r\n\r\n            const data = await response.json()\r\n\r\n            if (!response.ok) {\r\n                throw new Error(data.message || \"Đăng nhập thất bại\")\r\n            }\r\n\r\n            // Xử lý đăng nhập thành công\r\n            console.log(\"Login success:\", data)\r\n            // Lưu token vào localStorage hoặc cookie\r\n            if (data.data?.token) {\r\n                localStorage.setItem(\"accessToken\", data.data.token)\r\n            }\r\n\r\n            // Chuyển hướng (ví dụ về trang chủ)\r\n            // router.push(\"/dashboard\")\r\n            alert(\"Đăng nhập thành công!\")\r\n\r\n        } catch (err: any) {\r\n            setError(err.message || \"Có lỗi xảy ra khi kết nối server\")\r\n        } finally {\r\n            setIsLoading(false)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-h-screen w-full grid grid-cols-1 lg:grid-cols-2\">\r\n            {/* Left Side - Illustration */}\r\n            <div className=\"hidden lg:block relative w-full h-full\">\r\n                <Image\r\n                    src=\"/Login_page.png\"\r\n                    alt=\"Login Illustration\"\r\n                    fill\r\n                    className=\"object-cover\"\r\n                    priority\r\n                    quality={100}\r\n                    sizes=\"50vw\"\r\n                />\r\n            </div>\r\n\r\n            {/* Right Side - Login Form */}\r\n            <div className=\"flex flex-col items-center justify-center p-8 sm:p-12 lg:p-24 bg-white\">\r\n                <div className=\"w-full max-w-md space-y-8\">\r\n                    <div className=\"text-center space-y-2\">\r\n                        <h1 className=\"text-3xl font-bold text-[#6B59CE]\">Đăng nhập</h1>\r\n                    </div>\r\n\r\n                    <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n                        {error && (\r\n                            <div className=\"p-3 text-sm text-red-500 bg-red-50 rounded-md text-center\">\r\n                                {error}\r\n                            </div>\r\n                        )}\r\n\r\n                        <div className=\"space-y-2\">\r\n                            <Label htmlFor=\"email\">Tài khoản</Label>\r\n                            <Input\r\n                                id=\"email\"\r\n                                placeholder=\"Nhập tài khoản hoặc email đăng ký\"\r\n                                type=\"email\"\r\n                                value={formData.email}\r\n                                onChange={(e: any) => setFormData({ ...formData, email: e.target.value })}\r\n                                required\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"space-y-2\">\r\n                            <Label htmlFor=\"password\">Mật khẩu</Label>\r\n                            <div className=\"relative\">\r\n                                <Input\r\n                                    id=\"password\"\r\n                                    placeholder=\"Nhập mật khẩu\"\r\n                                    type={showPassword ? \"text\" : \"password\"}\r\n                                    value={formData.password}\r\n                                    onChange={(e: any) => setFormData({ ...formData, password: e.target.value })}\r\n                                    required\r\n                                />\r\n                                <button\r\n                                    type=\"button\"\r\n                                    onClick={() => setShowPassword(!showPassword)}\r\n                                    className=\"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-[#6B59CE]\"\r\n                                >\r\n                                    {showPassword ? (\r\n                                        <EyeOff className=\"h-5 w-5\" />\r\n                                    ) : (\r\n                                        <Eye className=\"h-5 w-5\" />\r\n                                    )}\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"flex justify-end\">\r\n                            <Link\r\n                                href=\"/forgot-password\"\r\n                                className=\"text-sm font-medium text-[#6B59CE] hover:underline\"\r\n                            >\r\n                                Quên mật khẩu\r\n                            </Link>\r\n                        </div>\r\n\r\n                        <Button type=\"submit\" disabled={isLoading}>\r\n                            {isLoading ? (\r\n                                <>\r\n                                    <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\r\n                                    Đang xử lý...\r\n                                </>\r\n                            ) : (\r\n                                \"Đăng nhập\"\r\n                            )}\r\n                        </Button>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n"],"names":[],"mappings":"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"}}]
}