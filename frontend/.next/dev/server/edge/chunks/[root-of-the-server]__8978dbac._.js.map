{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/middleware.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\r\nimport type { NextRequest } from \"next/server\";\r\n\r\n// Các route không cần authentication (public routes)\r\nconst publicRoutes = [\"/auth/login\", \"/auth/register\", \"/forgot-password\"];\r\n\r\nexport function middleware(request: NextRequest) {\r\n    const { pathname } = request.nextUrl;\r\n\r\n    // Lấy token từ cookie\r\n    const token = request.cookies.get(\"accessToken\")?.value;\r\n\r\n    // 1. Nếu đã đăng nhập (có token) mà cố truy cập trang login/register -> Redirect về dashboard (hoặc trang chủ)\r\n    if (token && publicRoutes.includes(pathname)) {\r\n        return NextResponse.redirect(new URL(\"/\", request.url));\r\n    }\r\n\r\n    // 2. Nếu chưa đăng nhập (không có token) mà truy cập route bảo vệ (không phải public) -> Redirect về login\r\n    if (!token && !publicRoutes.includes(pathname)) {\r\n        // Bỏ qua các file tĩnh, api, _next\r\n        if (\r\n            pathname.startsWith(\"/_next\") ||\r\n            pathname.startsWith(\"/api\") ||\r\n            pathname.startsWith(\"/static\") ||\r\n            pathname.includes(\".\") // file có đuôi mở rộng (ảnh, css...)\r\n        ) {\r\n            return NextResponse.next();\r\n        }\r\n\r\n        return NextResponse.redirect(new URL(\"/auth/login\", request.url));\r\n    }\r\n\r\n    return NextResponse.next();\r\n}\r\n\r\n// Cấu hình matcher để middleware chỉ chạy trên các path cụ thể\r\nexport const config = {\r\n    matcher: [\r\n        /*\r\n         * Match all request paths except for the ones starting with:\r\n         * - api (API routes)\r\n         * - _next/static (static files)\r\n         * - _next/image (image optimization files)\r\n         * - favicon.ico (favicon file)\r\n         */\r\n        \"/((?!api|_next/static|_next/image|favicon.ico|images).*)\",\r\n    ],\r\n};\r\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;;AAGA,qDAAqD;AACrD,MAAM,eAAe;IAAC;IAAe;IAAkB;CAAmB;AAEnE,SAAS,WAAW,OAAoB;IAC3C,MAAM,EAAE,QAAQ,EAAE,GAAG,QAAQ,OAAO;IAEpC,sBAAsB;IACtB,MAAM,QAAQ,QAAQ,OAAO,CAAC,GAAG,CAAC,gBAAgB;IAElD,+GAA+G;IAC/G,IAAI,SAAS,aAAa,QAAQ,CAAC,WAAW;QAC1C,OAAO,gMAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,KAAK,QAAQ,GAAG;IACzD;IAEA,2GAA2G;IAC3G,IAAI,CAAC,SAAS,CAAC,aAAa,QAAQ,CAAC,WAAW;QAC5C,mCAAmC;QACnC,IACI,SAAS,UAAU,CAAC,aACpB,SAAS,UAAU,CAAC,WACpB,SAAS,UAAU,CAAC,cACpB,SAAS,QAAQ,CAAC,KAAK,qCAAqC;UAC9D;YACE,OAAO,gMAAY,CAAC,IAAI;QAC5B;QAEA,OAAO,gMAAY,CAAC,QAAQ,CAAC,IAAI,IAAI,eAAe,QAAQ,GAAG;IACnE;IAEA,OAAO,gMAAY,CAAC,IAAI;AAC5B;AAGO,MAAM,SAAS;IAClB,SAAS;QACL;;;;;;SAMC,GACD;KACH;AACL"}}]
}